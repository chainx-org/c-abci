/*********************************************************************************************/
/*                   c-abci.h Created by xuli on 2017/08/25                                  */
/*                     本文件提供的三个接口供应用程序使用                                    */
/*********************************************************************************************/
#ifndef __C_ABCI_H__
#define __C_ABCI_H__

#include "internal.h"

/* 回调应用程序提供的函数原型 */
typedef void* (*Application)(Types__Request *);


/************************************************************************************************
 * 初始化C-ABCI服务，即绑定监听制定的IP地址端口
 * @ipaddr:待绑定的IP地址
 * @port:待绑定的端口
 * @return: 成功返回0， 失败返回-1
 ************************************************************************************************/
int server_init(const char *ipaddr, const char *port);


/************************************************************************************************
 * 开始启动C-ABCI服务
 * @app:应用程序提供的回调函数，在接收到请求的时候会被回调
 * @return: 只有程序出错才会返回，否则一直等待新的连接
 ************************************************************************************************/
void server_start(Application app);


/************************************************************************************************
 * 停止C-ABCI的服务,关闭绑定监听的接口
 * @return: 返回空值
 ************************************************************************************************/
void server_stop();

#endif
